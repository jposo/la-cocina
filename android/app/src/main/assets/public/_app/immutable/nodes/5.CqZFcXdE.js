import"../chunks/DsnmJJEf.js";import{g as ne,p as ce,h as D,i as de,o as ve,u as pe,j as g,m as R,v as fe,a as U,b as v,c as ue,k as e,t as _,$ as me,f as h,d as r,r as i,s as o,e as p,l as _e,z as he}from"../chunks/zjNGrtKt.js";import{i as A}from"../chunks/DNhcWaGG.js";import{e as z,i as M}from"../chunks/B0woXT6V.js";import{s as B}from"../chunks/DJ2II89Z.js";import{s as xe}from"../chunks/k5YxE_ZS.js";import{s as H,a as ge}from"../chunks/P1CHQYUc.js";import{p as J}from"../chunks/C_FpOsEG.js";import{i as be,u as ke}from"../chunks/zIVoLjNL.js";var we=(E,b,x)=>b(e(x).id),$e=h('<div class="badge badge-secondary"> </div>'),ye=h("<li> </li>"),je=h("<li> </li>"),Ie=h('<div class="flex flex-col items-center justify-center w-full max-w-2xl mx-auto p-6 space-y-6"><h1 class="text-3xl font-bold text-center"> </h1> <button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-[1.2em]"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"></path></svg> </button> <div class="flex gap-2 flex-wrap justify-center"><div class="badge badge-primary"> </div> <!> <div class="badge badge-accent"> </div></div> <p class="text-center text-base leading-relaxed"> </p> <img class="w-full max-w-md mx-auto"/> <div class="w-full bg-base-200 rounded-box p-4"><h2 class="text-2xl font-semibold mb-2">Ingredients</h2> <ul class="list-disc list-inside space-y-1"></ul></div> <div class="w-full bg-base-200 rounded-box p-4"><h2 class="text-2xl font-semibold mb-2">Steps</h2> <ol class="list-decimal list-inside space-y-3"></ol></div></div>'),Ce=h("<p>Loading...</p>");function Ge(E,b){ce(b,!0);const x=()=>H(be,"$isAuthenticated",F),k=()=>H(ke,"$user",F),[F,K]=ge();let a=D(de({})),l=D(!1);ve(async()=>{const s=J.params.id;if(!s)return;const t=await fetch(`https://aesthetic-sunflower-97a6e4.netlify.app/api/foods/${s}`);g(a,await t.json(),!0)}),pe(()=>{(async()=>{if(x()&&k()?.sub){const n=await(await fetch(`https://aesthetic-sunflower-97a6e4.netlify.app/api/likes/${k().sub}`)).json();g(l,n[J.params.id],!0)}else g(l,!1)})()});async function N(s){if(!x()){alert("Please log in to like this food");return}try{const t=e(l)?"unlike":"like";g(l,!e(l));const m=await(await fetch(`https://aesthetic-sunflower-97a6e4.netlify.app/api/foods/like?foodId=${encodeURIComponent(s)}&userId=${encodeURIComponent(k().sub)}&action=${encodeURIComponent(t)}`,{method:"GET"})).json();m.message&&alert(m.message)}catch(t){console.error(t),alert(`Failed to like/unlike food: ${t}`)}}var G=R();fe(s=>{var t=R(),n=U(t);{var m=c=>{_(()=>me.title=e(a).title)};A(n,c=>{e(a)&&c(m)})}v(s,t)});var Q=U(G);{var V=s=>{var t=Ie(),n=r(t),m=r(n,!0);i(n);var c=o(n,2);c.__click=[we,N,a];var O=r(c),X=o(O);i(c);var w=o(c,2),$=r(w),Y=r($,!0);i($);var P=o($,2);{var ee=f=>{var u=$e(),d=r(u,!0);i(u),_(()=>p(d,e(a).portion)),v(f,u)};A(P,f=>{e(a).portion&&f(ee)})}var S=o(P,2),te=r(S,!0);i(S),i(w);var y=o(w,2),ae=r(y,!0);i(y);var j=o(y,2),I=o(j,2),T=o(r(I),2);z(T,21,()=>e(a).ingredients,M,(f,u)=>{var d=ye(),C=r(d,!0);i(d),_(()=>p(C,e(u))),v(f,d)}),i(T),i(I);var Z=o(I,2),q=o(r(Z),2);z(q,21,()=>e(a).method,M,(f,u)=>{var d=R(),C=U(d);z(C,17,()=>Object.entries(e(u)),M,(se,ie)=>{var re=_e(()=>he(e(ie),2));let oe=()=>e(re)[1];var L=je(),le=r(L,!0);i(L),_(()=>p(le,oe())),v(se,L)}),v(f,d)}),i(q),i(Z),i(t),_(()=>{p(m,e(a).title),xe(c,1,`btn ${e(l)?"btn-secondary":""}`),B(O,"fill",e(l)?"white":""),p(X,` ${e(l)?"Unlike":"Like"}`),p(Y,e(a).difficulty),p(te,e(a).time),p(ae,e(a).description),B(j,"src",e(a).image),B(j,"alt",e(a).title)}),v(s,t)},W=s=>{var t=Ce();v(s,t)};A(Q,s=>{e(a)?s(V):s(W,!1)})}v(E,G),ue(),K()}ne(["click"]);export{Ge as component};
