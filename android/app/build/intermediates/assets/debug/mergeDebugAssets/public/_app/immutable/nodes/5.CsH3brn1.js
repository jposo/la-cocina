import"../chunks/DsnmJJEf.js";import{g as ne,p as de,h as G,i as ce,o as ve,u as pe,j as I,m as z,v as fe,a as C,b as c,c as ue,k as e,t as m,$ as me,f as _,d as i,r,s as o,e as v,l as _e,z as he}from"../chunks/zjNGrtKt.js";import{i as F}from"../chunks/DNhcWaGG.js";import{e as M,i as O}from"../chunks/B0woXT6V.js";import{s as P}from"../chunks/DJ2II89Z.js";import{s as xe}from"../chunks/k5YxE_ZS.js";import{s as H,a as be}from"../chunks/P1CHQYUc.js";import{p as J}from"../chunks/6dttAVTF.js";import{i as ge,u as ke}from"../chunks/zIVoLjNL.js";var we=(R,x,h)=>x(e(h).id),ye=_('<div class="badge badge-secondary"> </div>'),$e=_("<li> </li>"),je=_("<li> </li>"),Le=_('<div class="flex flex-col items-center justify-center w-full max-w-2xl mx-auto p-6 space-y-6"><h1 class="text-3xl font-bold text-center"> </h1> <button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-[1.2em]"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"></path></svg> </button> <div class="flex gap-2 flex-wrap justify-center"><div class="badge badge-primary"> </div> <!> <div class="badge badge-accent"> </div></div> <p class="text-center text-base leading-relaxed"> </p> <img class="w-full max-w-md mx-auto"/> <div class="w-full bg-base-200 rounded-box p-4"><h2 class="text-2xl font-semibold mb-2">Ingredients</h2> <ul class="list-disc list-inside space-y-1"></ul></div> <div class="w-full bg-base-200 rounded-box p-4"><h2 class="text-2xl font-semibold mb-2">Steps</h2> <ol class="list-decimal list-inside space-y-3"></ol></div></div>'),Ae=_("<p>Loading...</p>");function Be(R,x){de(x,!0);const h=()=>H(ge,"$isAuthenticated",S),b=()=>H(ke,"$user",S),[S,K]=be();let a=G(ce({})),u=G(!1);ve(async()=>{const s=J.params.id;if(!s)return;const t=await fetch(`https://aesthetic-sunflower-97a6e4.netlify.app/api/food/${s}`);I(a,await t.json(),!0)}),pe(()=>{(async()=>{if(h()&&b()?.sub){const l=await(await fetch(`https://aesthetic-sunflower-97a6e4.netlify.app/api/likes/${b().sub}`)).json();I(u,l[J.params.id],!0)}else I(u,!1)})()});async function N(s){if(!h()){alert("Please log in to like this food");return}const t=new FormData;t.append("foodId",s),t.append("userId",b().sub),t.append("action",e(u)?"unlike":"like");try{await fetch("https://aesthetic-sunflower-97a6e4.netlify.app/api/foods/like",{method:"POST",body:t})}catch(l){console.error(l),alert(`Failed to like/unlike food: ${l}`)}}var B=z();fe(s=>{var t=z(),l=C(t);{var g=n=>{m(()=>me.title=e(a).title)};F(l,n=>{e(a)&&n(g)})}c(s,t)});var Q=C(B);{var V=s=>{var t=Le(),l=i(t),g=i(l,!0);r(l);var n=o(l,2);n.__click=[we,N,a];var D=i(n),X=o(D);r(n);var k=o(n,2),w=i(k),Y=i(w,!0);r(w);var T=o(w,2);{var ee=p=>{var f=ye(),d=i(f,!0);r(f),m(()=>v(d,e(a).portion)),c(p,f)};F(T,p=>{e(a).portion&&p(ee)})}var U=o(T,2),te=i(U,!0);r(U),r(k);var y=o(k,2),ae=i(y,!0);r(y);var $=o(y,2),j=o($,2),Z=o(i(j),2);M(Z,21,()=>e(a).ingredients,O,(p,f)=>{var d=$e(),L=i(d,!0);r(d),m(()=>v(L,e(f))),c(p,d)}),r(Z),r(j);var q=o(j,2),E=o(i(q),2);M(E,21,()=>e(a).method,O,(p,f)=>{var d=z(),L=C(d);M(L,17,()=>Object.entries(e(f)),O,(se,re)=>{var ie=_e(()=>he(e(re),2));let oe=()=>e(ie)[1];var A=je(),le=i(A,!0);r(A),m(()=>v(le,oe())),c(se,A)}),c(p,d)}),r(E),r(q),r(t),m(()=>{v(g,e(a).title),xe(n,1,`btn ${e(u)?"btn-secondary":""}`),P(D,"fill",e(u)?"white":""),v(X,` ${e(u)?"Unlike":"Like"}`),v(Y,e(a).difficulty),v(te,e(a).time),v(ae,e(a).description),P($,"src",e(a).image),P($,"alt",e(a).title)}),c(s,t)},W=s=>{var t=Ae();c(s,t)};F(Q,s=>{e(a)?s(V):s(W,!1)})}c(R,B),ue(),K()}ne(["click"]);export{Be as component};
